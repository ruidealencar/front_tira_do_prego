(function(t){function e(e){for(var o,s,i=e[0],l=e[1],u=e[2],d=0,m=[];d<i.length;d++)s=i[d],r[s]&&m.push(r[s][0]),r[s]=0;for(o in l)Object.prototype.hasOwnProperty.call(l,o)&&(t[o]=l[o]);c&&c(e);while(m.length)m.shift()();return n.push.apply(n,u||[]),a()}function a(){for(var t,e=0;e<n.length;e++){for(var a=n[e],o=!0,i=1;i<a.length;i++){var l=a[i];0!==r[l]&&(o=!1)}o&&(n.splice(e--,1),t=s(s.s=a[0]))}return t}var o={},r={app:0},n=[];function s(e){if(o[e])return o[e].exports;var a=o[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.m=t,s.c=o,s.d=function(t,e,a){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)s.d(a,o,function(e){return t[e]}.bind(null,o));return a},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],l=i.push.bind(i);i.push=e,i=i.slice();for(var u=0;u<i.length;u++)e(i[u]);var c=l;n.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"034f":function(t,e,a){"use strict";var o=a("c21b"),r=a.n(o);r.a},"08f2":function(t,e,a){},2175:function(t,e,a){"use strict";var o=a("f587"),r=a.n(o);r.a},"2dd6":function(t,e,a){"use strict";var o=a("bd70"),r=a.n(o);r.a},3599:function(t,e,a){},"366f":function(t,e,a){},"3e69":function(t,e,a){},"4ef3":function(t,e,a){"use strict";var o=a("ff01"),r=a.n(o);r.a},"52d3":function(t,e,a){},"56d7":function(t,e,a){"use strict";a.r(e);a("cadf"),a("551c"),a("097d"),a("7f10");var o=a("2b0e"),r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("Header",{attrs:{title:"Tira do Prego",hideToggle:!t.usuario,hideUserDropdown:!t.usuario}}),t.validatingToken?a("Loading"):a("Content"),a("Footer")],1)},n=[],s=(a("96cf"),a("3040")),i=a("bc3a"),l=a.n(i),u="__knowledge_user",c="https://apitiradoprego.herokuapp.com";function d(t){t&&t.response&&t.response.data?o["a"].toasted.global.defaultError({msg:t.response.data}):"string"===typeof t?o["a"].toasted.global.defaultError({msg:t}):o["a"].toasted.global.defaultError()}var m=a("2f62"),p=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("header",{staticClass:"header"},[a("h1",{staticClass:"title"},[a("router-link",{attrs:{to:"/"}},[t._v(t._s(t.title))])],1),t.hideUserDropdown?t._e():a("UserDropdown")],1)},f=[],b=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"user-dropdown"},[a("div",{staticClass:"user-button"},[a("span",{staticClass:"d-none d-sm-block"},[t._v(t._s(t.usuario.usuario)+" ")]),a("i",{staticClass:"fa fa-angle-down"})]),a("div",{staticClass:"user-dropdown-content"},[t.usuario.admin?a("router-link",{attrs:{to:"/admin"}},[a("i",{staticClass:"fa fa-cogs"}),t._v(" Administração\n        ")]):t._e(),a("a",{attrs:{href:""},on:{click:function(e){return e.preventDefault(),t.logout(e)}}},[a("i",{staticClass:"fa fa-sign-out"}),t._v(" Sair")])],1)])},v=[],g=a("e06a"),h=a.n(g),_={name:"UserDropdown",components:{Gravatar:h.a},computed:Object(m["b"])(["usuario"]),methods:{logout:function(){localStorage.removeItem(u),this.$store.commit("setUsuario",null),this.$router.push({name:"auth"})}}},y=_,k=(a("a09f"),a("2877")),x=Object(k["a"])(y,b,v,!1,null,null,null);x.options.__file="UserDropdown.vue";var w=x.exports,$={name:"Header",components:{UserDropdown:w},props:{title:String,hideUserDropdown:Boolean},computed:{icon:function(){return this.$store.state.isMenuVisible?"fa-angle-left":"fa-angle-down"}},methods:{}},P=$,C=(a("9f34"),Object(k["a"])(P,p,f,!1,null,null,null));C.options.__file="Header.vue";var O=C.exports,T=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"content"},[a("router-view")],1)},S=[],j={name:"Content"},E=j,A=(a("9551"),Object(k["a"])(E,T,S,!1,null,null,null));A.options.__file="Content.vue";var M=A.exports,U=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},L=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("footer",{staticClass:"footer"},[a("span",[t._v("Copyright "),a("strong",[t._v("Tira do Prego")])])])}],D={name:"Footer"},H=D,V=(a("2175"),Object(k["a"])(H,U,L,!1,null,null,null));V.options.__file="Footer.vue";var N=V.exports,q=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},F=[function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"loading"},[o("img",{attrs:{src:a("cf1c"),alt:"Loading"}})])}],R={name:"Loading"},B=R,J=(a("2dd6"),Object(k["a"])(B,q,F,!1,null,null,null));J.options.__file="Loading.vue";var z=J.exports,G={name:"App",components:{Header:O,Content:M,Footer:N,Loading:z},computed:Object(m["b"])(["isMenuVisible","usuario"]),data:function(){return{validatingToken:!0}},methods:{validateToken:function(){var t=Object(s["a"])(regeneratorRuntime.mark(function t(){var e,a,o;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(this.validatingToken=!0,e=localStorage.getItem(u),a=JSON.parse(e),this.$store.commit("setUsuario",null),a){t.next=8;break}return this.validatingToken=!1,this.$router.push({name:"auth"}),t.abrupt("return");case 8:return t.next=10,l.a.put("".concat(c,"/api/Auth"),a);case 10:o=t.sent,o.data?"xs"!==this.$mq&&"sm"!==this.$mq||this.$store.commit("toggleMenu",!1):this.$router.push({name:"auth"}),this.validatingToken=!1;case 13:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},created:function(){this.validateToken()}},I=G,K=(a("034f"),Object(k["a"])(I,r,n,!1,null,null,null));K.options.__file="App.vue";var Q=K.exports,W=(a("f9e3"),a("2dd8"),a("9f7b"));o["a"].use(W["a"]);var X=a("a65d"),Y=a.n(X);o["a"].use(Y.a,{iconPack:"fontawesome",duration:3e3}),o["a"].toasted.register("defaultSuccess",function(t){return t.msg?t.msg:"Operação realidada com sucesso!"},{type:"success",icon:"check"}),o["a"].toasted.register("defaultError",function(t){return t.msg?t.msg:"Oops.. Erro inesperado."},{type:"error",icon:"times"}),o["a"].toasted.register("passwordError",function(t){return t.msg?t.msg:"Passwords não conferem."},{type:"error",icon:"times"});var Z=function(t){return t},tt=function(t){if(401!==t.response.status)return Promise.reject(t);window.location="/"};l.a.interceptors.response.use(Z,tt);var et=a("660e");o["a"].use(et["a"],{breakpoints:{xs:576,sm:768,md:960,lg:1140,xl:1/0}}),o["a"].use(m["a"]);var at=new m["a"].Store({state:{isMenuVisible:!1,usuario:null},mutations:{toggleMenu:function(t,e){t.usuario?t.isMenuVisible=void 0===e?!t.isMenuVisible:e:t.isMenuVisible=!1},setUsuario:function(t,e){t.usuario=e,e?(l.a.defaults.headers.common["Authorization"]="bearer ".concat(e.accessToken),t.isMenuVisible=!0):(delete l.a.defaults.headers.common["Authorization"],t.isMenuVisible=!1)}}}),ot=a("8c4f"),rt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"home"},[a("PageTitle",{attrs:{icon:"fa fa-home",main:"Dashboard",sub:"Tira do Prego"}}),a("div",{staticClass:"stats"},[a("Stat",{attrs:{title:"Prestadores",value:t.stat.Prestador,icon:"fa fa-user",color:"#d54d50"}}),a("Stat",{attrs:{title:"Usuários",value:t.stat.Usuario,icon:"fa fa-user",color:"#3282cd"}})],1)],1)},nt=[],st=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page-title"},[a("h2",[t._v(t._s(t.sub))]),a("hr")])},it=[],lt={name:"PageTitle",props:["icon","main","sub"]},ut=lt,ct=(a("a405"),Object(k["a"])(ut,st,it,!1,null,null,null));ct.options.__file="PageTitle.vue";var dt=ct.exports,mt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"stat"},[a("div",{staticClass:"stat-icon"},[a("i",{class:t.icon,style:t.style})]),a("div",{staticClass:"stat-info"},[a("span",{staticClass:"stat-title"},[t._v(t._s(t.title))]),a("span",{staticClass:"stat-value"},[t._v(t._s(t.value))])])])},pt=[],ft={name:"Stat",props:["title","value","icon","color"],computed:{style:function(){return"color: "+(this.color||"#000")}}},bt=ft,vt=(a("5b5c"),Object(k["a"])(bt,mt,pt,!1,null,null,null));vt.options.__file="Stat.vue";var gt=vt.exports,ht={name:"Home",components:{PageTitle:dt,Stat:gt},data:function(){return{stat:{}}},methods:{getStats:function(){var t=this;l.a.get("".concat(c,"/api/Status")).then(function(e){t.stat=e.data})}},mounted:function(){this.getStats()}},_t=ht,yt=(a("b497"),Object(k["a"])(_t,rt,nt,!1,null,null,null));yt.options.__file="Home.vue";var kt=yt.exports,xt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"admin-pages"},[a("PageTitle",{attrs:{icon:"fa fa-cogs",main:"Administração do Sistema",sub:"Gerenciamento"}}),a("div",{staticClass:"admin-pages-tabs"},[a("b-card",{attrs:{"no-body":""}},[a("b-tabs",{attrs:{card:""}},[a("b-tab",{attrs:{title:"Prestador",active:""}},[a("PrestadorAdmin")],1),a("b-tab",{attrs:{title:"Usuario"}},[a("UsuarioAdmin")],1)],1)],1)],1)],1)},wt=[],$t=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"category-admin"},[a("b-form",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.prestador.id,expression:"prestador.id"}],attrs:{id:"category-id",type:"hidden"},domProps:{value:t.prestador.id},on:{input:function(e){e.target.composing||t.$set(t.prestador,"id",e.target.value)}}}),"remove"!=t.mode?a("b-row",[a("b-col",{attrs:{md:"6",sm:"12"}},[a("b-form-group",{attrs:{label:"Nome:","label-for":"category-name"}},[a("b-form-input",{attrs:{id:"category-name",type:"text",required:"",placeholder:"Nome Fantasia"},model:{value:t.prestador.nome,callback:function(e){t.$set(t.prestador,"nome",e)},expression:"prestador.nome"}})],1)],1),a("b-col",{attrs:{md:"6",sm:"12"}},[a("b-form-group",{attrs:{label:"Latitude:","label-for":"category-name"}},[a("b-form-input",{attrs:{id:"category-name",type:"text",placeholder:"Latitude"},model:{value:t.prestador.latitude,callback:function(e){t.$set(t.prestador,"latitude",e)},expression:"prestador.latitude"}})],1)],1)],1):t._e(),"remove"!=t.mode?a("b-row",[a("b-col",{attrs:{md:"6",sm:"12"}},[a("b-form-group",{attrs:{label:"Telefone:","label-for":"category-name"}},[a("b-form-input",{attrs:{id:"category-name",type:"text",placeholder:"Telefone"},model:{value:t.prestador.telefone,callback:function(e){t.$set(t.prestador,"telefone",e)},expression:"prestador.telefone"}})],1)],1),a("b-col",{attrs:{md:"6",sm:"12"}},[a("b-form-group",{attrs:{label:"Longitude:","label-for":"category-name"}},[a("b-form-input",{attrs:{id:"category-name",type:"text",placeholder:"Longitude"},model:{value:t.prestador.longitude,callback:function(e){t.$set(t.prestador,"longitude",e)},expression:"prestador.longitude"}})],1)],1)],1):t._e(),"remove"!=t.mode?a("b-row",[a("b-col",{attrs:{md:"6",sm:"12"}},[a("b-form-group",{attrs:{label:"Horario:","label-for":"category-name"}},[a("b-form-input",{attrs:{id:"category-name",type:"text",required:"",placeholder:"Horario de funcionamento"},model:{value:t.prestador.horario,callback:function(e){t.$set(t.prestador,"horario",e)},expression:"prestador.horario"}})],1)],1),a("b-col",{attrs:{md:"6",sm:"12"}},[a("b-form-group",{attrs:{label:"Tipo",id:"category-tipo","label-for":"category-name"}},[a("b-form-radio",{attrs:{name:"category-tipo",value:"B"},model:{value:t.prestador.tipo,callback:function(e){t.$set(t.prestador,"tipo",e)},expression:"prestador.tipo"}},[t._v("Borracharia")]),a("b-form-radio",{attrs:{name:"category-tipo",value:"R"},model:{value:t.prestador.tipo,callback:function(e){t.$set(t.prestador,"tipo",e)},expression:"prestador.tipo"}},[t._v("Reboque")])],1)],1)],1):t._e(),"remove"===t.mode?a("b-row",[a("b-col",{attrs:{md:"6",sm:"12"}},[a("b-form-group",{attrs:{label:"Nome:","label-for":"category-name"}},[a("b-form-input",{attrs:{id:"category-name",type:"text",readonly:"remove"===t.mode},model:{value:t.prestador.nome,callback:function(e){t.$set(t.prestador,"nome",e)},expression:"prestador.nome"}})],1)],1),a("b-col",{attrs:{md:"6",sm:"12"}},[a("b-form-group",{attrs:{label:"Latitude:","label-for":"category-name"}},[a("b-form-input",{attrs:{id:"category-name",type:"text",readonly:"remove"===t.mode},model:{value:t.prestador.latitude,callback:function(e){t.$set(t.prestador,"latitude",e)},expression:"prestador.latitude"}})],1)],1)],1):t._e(),"remove"===t.mode?a("b-row",[a("b-col",{attrs:{md:"6",sm:"12"}},[a("b-form-group",{attrs:{label:"Telefone:","label-for":"category-name"}},[a("b-form-input",{attrs:{id:"category-name",type:"text",readonly:"remove"===t.mode},model:{value:t.prestador.telefone,callback:function(e){t.$set(t.prestador,"telefone",e)},expression:"prestador.telefone"}})],1)],1),a("b-col",{attrs:{md:"6",sm:"12"}},[a("b-form-group",{attrs:{label:"Longitude:","label-for":"category-name"}},[a("b-form-input",{attrs:{id:"category-name",type:"text",readonly:"remove"===t.mode},model:{value:t.prestador.longitude,callback:function(e){t.$set(t.prestador,"longitude",e)},expression:"prestador.longitude"}})],1)],1)],1):t._e(),"load"===t.mode||"save"===t.mode?a("b-row",[a("b-col",{attrs:{md:"12",sm:"6"}},[a("b-button",{attrs:{block:"",variant:"primary"},on:{click:t.save}},[t._v("Salvar")])],1)],1):"edit"===t.mode?a("b-row",[a("b-col",{attrs:{md:"6",sm:"6"}},[a("b-button",{attrs:{block:"",variant:"primary"},on:{click:t.save}},[t._v("Salvar")])],1),a("b-col",{attrs:{md:"6",sm:"6"}},["edit"===t.mode||"remove"===t.mode?a("b-button",{attrs:{block:""},on:{click:t.reset}},[t._v("Cancelar")]):t._e()],1)],1):t._e(),a("b-row",[a("b-col",{attrs:{md:"6",sm:"6"}},["remove"===t.mode?a("b-button",{attrs:{block:"",variant:"danger"},on:{click:t.remove}},[t._v("Excluir")]):t._e()],1),a("b-col",{attrs:{md:"6",sm:"6"}},["remove"===t.mode?a("b-button",{attrs:{block:""},on:{click:t.reset}},[t._v("Cancelar")]):t._e()],1)],1)],1),a("hr"),a("b-table",{attrs:{hover:"",striped:"",items:t.prestadores,fields:t.fields},scopedSlots:t._u([{key:"actions",fn:function(e){return[a("b-button",{staticClass:"mr-2",attrs:{variant:"warning"},on:{click:function(a){t.loadPrestador(e.item)}}},[a("i",{staticClass:"fa fa-pencil"})]),a("b-button",{attrs:{variant:"danger"},on:{click:function(a){t.loadPrestador(e.item,"remove")}}},[a("i",{staticClass:"fa fa-trash"})])]}}])})],1)},Pt=[],Ct=a("c93e"),Ot={name:"PrestadorAdmin",data:function(){return{mode:"load",prestador:{},prestadores:[],fields:[{key:"nome",label:"Nome",sortable:!0},{key:"latitude",label:"Latitude",sortable:!0},{key:"longitude",label:"Longitude"},{key:"horario",label:"Horario"},{key:"telefone",label:"Telefone"},{key:"tipo",label:"Tipo"},{key:"actions",label:"Ações"}]}},methods:{loadPrestadores:function(){var t=this,e="".concat(c,"/api/v1/prestador");l.a.get(e).then(function(e){t.prestadores=e.data.map(function(t){return Object(Ct["a"])({},t,{value:t.id,text:t.nome})})})},reset:function(){this.mode="save",this.prestador={},this.loadPrestadores()},save:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"save";this.mode=e;var a=this.prestador.id?"put":"post",o=this.prestador.id?"/".concat(this.prestador.id):"";l.a[a]("".concat(c,"/api/v1/prestador").concat(o),this.prestador).then(function(){t.$toasted.global.defaultSuccess(),t.reset()}).catch(d)},remove:function(){var t=this,e=this.prestador.id;l.a.delete("".concat(c,"/api/v1/prestador/").concat(e)).then(function(){t.$toasted.global.defaultSuccess(),t.reset()}).catch(d)},loadPrestador:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"edit";this.mode=e,this.prestador=Object(Ct["a"])({},t)}},mounted:function(){this.loadPrestadores()}},Tt=Ot,St=(a("4ef3"),Object(k["a"])(Tt,$t,Pt,!1,null,null,null));St.options.__file="PrestadorAdmin.vue";var jt=St.exports,Et={name:"AdminPages",components:{PageTitle:dt,PrestadorAdmin:jt}},At=Et,Mt=(a("9519"),Object(k["a"])(At,xt,wt,!1,null,null,null));Mt.options.__file="AdminPages.vue";var Ut=Mt.exports;o["a"].use(ot["a"]);var Lt=[{name:"home",path:"/",component:kt},{name:"adminPages",path:"/admin",component:Ut},{name:"auth",path:"/auth",component:Ut}],Dt=new ot["a"]({mode:"history",routes:Lt}),Ht=Dt;o["a"].config.productionTip=!1,new o["a"]({store:at,router:Ht,render:function(t){return t(Q)}}).$mount("#app")},"5b5c":function(t,e,a){"use strict";var o=a("3e69"),r=a.n(o);r.a},"6eda":function(t,e,a){},9519:function(t,e,a){"use strict";var o=a("366f"),r=a.n(o);r.a},9551:function(t,e,a){"use strict";var o=a("6eda"),r=a.n(o);r.a},"9f34":function(t,e,a){"use strict";var o=a("08f2"),r=a.n(o);r.a},a09f:function(t,e,a){"use strict";var o=a("52d3"),r=a.n(o);r.a},a405:function(t,e,a){"use strict";var o=a("dda0"),r=a.n(o);r.a},b497:function(t,e,a){"use strict";var o=a("3599"),r=a.n(o);r.a},bd70:function(t,e,a){},c21b:function(t,e,a){},cf1c:function(t,e,a){t.exports=a.p+"img/loading.8a7630ca.gif"},dda0:function(t,e,a){},f587:function(t,e,a){},ff01:function(t,e,a){}});
//# sourceMappingURL=app.b1b5674a.js.map